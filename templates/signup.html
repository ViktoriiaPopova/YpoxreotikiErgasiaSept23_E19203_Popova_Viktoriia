<!DOCTYPE html>
<html>

<head>
  <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script><!--QJuery-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
  <link rel="stylesheet" href="/static/style.css" />
  <title>Sign Up</title>
</head>

<body>
  <section>
    <img class="small_icon"
      src="https://cdn0.iconfinder.com/data/icons/software-development-17/66/50_single_sign_on_sign_in_single_connection_log_in_user_interface-256.png"
      alt="error">
    <h3>Sign Up</h3>
    <div class="secretDiv"></div>
    <form class="authorize">
      <div class="form-group">
        <input type="text" class="form-control" id="name" name="name" placeholder="First name" />
      </div>
      <div class="form-group">
        <input type="text" class="form-control" id="surname" name="surname" placeholder="Second name" />
      </div>
      <div class="form-group">
        <label for="birthday">Birtday:</label>
        <input type="date" class="form-control" name="birthday" id="birthday" placeholder="Birtday" />
      </div>
      <div class="form-group">
        <input type="password" class="form-control" name="pwd" id="pwd" placeholder="Password" />
      </div>
      <div class="form-group">
        <input type="email" class="form-control" name="email" id="email" placeholder="Email" />
        <small class="form-text text-muted">We'll never share your email with anyone else.</small>
      </div>
      <button type="submit" class="btn btn-dark wide_btn">Submit</button>
    </form>
    <a href="{{ url_for('login') }}">I already have an account.</a>
  </section>
  <script>
    $(document).ready(function () {
      $('form').on('submit', function (e) {
        $.ajax({
          data: {
            name: $('#name').val(),
            surname: $('#surname').val(),
            birthday: $('#birthday').val(),
            pwd: $('#pwd').val(),
            email: $('#email').val(),
          },
          type: 'POST',
          url: '/signup'
        })
          .done(function (data) {
            $('.secretDiv').text(data.output).show();
            setTimeout(function () { location.reload(); }, 2000);
          });
        e.preventDefault();
      });
    });
  </script>
</body>

</html>